(function($){var container;var animation_interval;var wait_for_animation_interval;var cached_atts;$('body').on('change.eddAjaxFiltersTaxonomyAll','.edd-ajax-filter-taxonomy.edd-ajax-filter-multiple input[type="checkbox"]',function(e){if($(this).is(':checked')){$(this).closest('.edd-ajax-filter-taxonomy').find('input[type="checkbox"]'+(($(this).val()==0)?':not([value="0"])':'[value="0"]')).prop('checked',!1)}});$('body').on('click.eddAjaxFiltersButton','.edd-ajax-filter-button',function(e){e.preventDefault();var action=$(this).data('action');switch(action){case 'submit':edd_ajax_filters_apply_filters();break;case 'order':$(this).addClass('edd-ajax-filter-active');edd_ajax_filters_apply_filters();break}});var selectors=['.edd-ajax-filter-input','select.edd-ajax-filter-options','.edd-ajax-filter-options input','select.edd-ajax-filter-taxonomy','.edd-ajax-filter-taxonomy input',];$('body').on('change.eddAjaxFiltersAutoTrigger',selectors.join(', '),function(e){e.preventDefault();edd_ajax_filters_apply_filters()});function edd_ajax_filters_apply_filters(){var shortcode_form=$('#edd-ajax-filters-shortcode-atts');var container=$('.edd_downloads_list');if(!container.hasClass('edd-ajax-filters-loading')){container.addClass('edd-ajax-filters-loading');var filters=[];$('.edd-ajax-filter').each(function(){edd_ajax_filters_pass_filter(filters,$(this))});if(cached_atts===undefined){var shortcode_atts={};shortcode_form.find('input[name^="shortcode_atts"]').each(function(){shortcode_atts[$(this).data('att')]=$(this).val()});cached_atts=shortcode_atts}
if(edd_ajax_filters.out_animation!=''){container.addClass('edd-ajax-filters-animating');if(edd_ajax_filters.in_animation!=''){animation_interval=setInterval(edd_ajax_filters_change_animation,edd_ajax_filters.out_animation_delay,container,edd_ajax_filters.in_animation,edd_ajax_filters.out_animation)}else{animation_interval=setInterval(edd_ajax_filters_animate,edd_ajax_filters.out_animation_delay,container,edd_ajax_filters.out_animation)}}
$.ajax({url:edd_ajax_filters.ajax_url,data:{action:'edd_ajax_filters',nonce:edd_ajax_filters.nonce,filters:filters,shortcode_atts:cached_atts,paged:shortcode_form.find('input[name="paged"]').val()},cache:!1,success:function(response){if(response.found_results>0){var parsed_response=$(response.html);var content_to_append=parsed_response.filter('.edd_downloads_list').html();if(edd_ajax_filters.out_animation!=''&&edd_ajax_filters.in_animation!=''&&container.hasClass('edd-ajax-filters-animating')){wait_for_animation_interval=setInterval(edd_ajax_filters_wait_for_animate,200,container,content_to_append,edd_ajax_filters.in_animation,edd_ajax_filters.in_animation_delay)}else if(edd_ajax_filters.in_animation!=''){container.html(content_to_append);container.addClass('edd-ajax-filters-animating');animation_interval=setInterval(edd_ajax_filters_animate,edd_ajax_filters.in_animation_delay,container,edd_ajax_filters.in_animation)}else{container.html(content_to_append)}}else{container.html(response.html)}
container.removeClass('edd-ajax-filters-loading')}})}}
function edd_ajax_filters_get_filter_type(element){if(element.hasClass('edd-ajax-filter-order')){return 'order'}else if(element.hasClass('edd-ajax-filter-taxonomy')){return 'taxonomy'}
if(element.hasClass('edd-ajax-filter-button')){return 'button'}else if(element.hasClass('edd-ajax-filter-input')){return 'input'}else if(element.hasClass('edd-ajax-filter-options')){return 'options'}
return!1}
function edd_ajax_filters_pass_filter(filters,element){var filter=edd_ajax_filters_get_filter_type(element);var value,values;if(filter&&filter!=='button'){switch(filter){case 'input':if(element.val()!=''){filters.push({field:element.data('field'),value:element.val(),operator:element.data('operator'),filter:filter})}
break;case 'options':case 'taxonomy':value=undefined;if(element.hasClass('edd-ajax-filter-select')){value=element.val()}else if(element.hasClass('edd-ajax-filter-multiple')){values=[];element.find("input:checked").map(function(){values.push($(this).val())});if(values&&values.length){value=values.join(',')}}else{value=element.find("input:checked").val()}
if(value&&value.length){filters.push({field:element.data('field'),value:value,operator:element.data('operator'),filter:filter})}
break;case 'order':if(element.hasClass('edd-ajax-filter-active')){filters.push({field:element.data('field'),direction:element.data('direction'),filter:filter})}
break}}}
if(edd_ajax_filters.in_animation!=''&&$('.edd_downloads_list').length!=0){container=$('.edd_downloads_list');container.addClass('edd-ajax-filters-animating');animation_interval=setInterval(edd_ajax_filters_animate,edd_ajax_filters.in_animation_delay,container,edd_ajax_filters.in_animation)}
function edd_ajax_filters_animate(container,animation){var elements=container.find('.edd_download:not(.animated)');if(elements.length==0){container.removeClass('edd-ajax-filters-animating');clearInterval(animation_interval);return!1}
elements.first().addClass(animation).addClass('animated')}
function edd_ajax_filters_wait_for_animate(container,content,animation,animation_delay){if(container.hasClass('edd-ajax-filters-animating')){return!1}
container.html(content);container.addClass('edd-ajax-filters-animating');animation_interval=setInterval(edd_ajax_filters_animate,animation_delay,container,animation);clearInterval(wait_for_animation_interval)}
function edd_ajax_filters_change_animation(container,old_animation,new_animation){var elements=container.find('.edd_download.'+old_animation);if(elements.length==0){container.removeClass('edd-ajax-filters-animating');clearInterval(animation_interval);return!1}
elements.first().removeClass(old_animation).addClass(new_animation)}})(jQuery)